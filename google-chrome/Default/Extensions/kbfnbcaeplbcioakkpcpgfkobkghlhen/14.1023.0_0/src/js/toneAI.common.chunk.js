(self.webpackChunk=self.webpackChunk||[]).push([[7725],{55281:(e,t,i)=>{i.d(t,{O:()=>se});var n=i(57050),a=i(35214),o=i(40327),s=i(27378),r=i(63047),l=i(24394),c=i(46547),d=i(79921),p=i(1620),m=i(86705),u=i(12187),I=i(67489),v=i.n(I);const h=({emojiUnicode:e,title:t,expanded:i,accepted:n,onShow:a,onExpand:o,onClick:r,onClose:I,onVote:h,browser:A,lensIsPriority:C})=>(s.useEffect((()=>{null==a||a()}),[t]),s.useEffect((()=>{i&&(null==o||o())}),[i]),s.createElement(c.Z,{kind:C?"assistant-priority-lens":"assistant-all-lens",onClick:()=>{i||r()},dataPartName:"intent-detection-card"},s.createElement("div",{...(0,u.Sh)(v().intentDetectionCardContent,i&&!n?v().intentDetectionCardContentExpanded:null,n?v().intentDetectionCardContentAccepted:null)},s.createElement("div",{className:v().intentDetectionCardEmojiAndTitle},s.createElement(d.dy,{className:v().intentDetectionCardEmoji,unicodeLiteral:null,unicodeHexArray:n?["1f64c"]:[e]}),n?s.createElement("div",null,"Thanks for helping us build new suggestions!"):s.createElement("div",null,s.createElement("div",null,t),s.createElement("div",{className:v().intentDetectionCardExpandedInfo},"Your input helps us develop more tailored suggestions for you."))),n?s.createElement("div",{className:v().intentDetectionCardBetaBadgeAndCloseButton},s.createElement(p.P,{onClick:e=>{e.stopPropagation(),I()},size:"small",containerClassName:v().intentDetectionCardCloseButton}),s.createElement(m.v,{browser:A,className:v().intentDetectionCardBetaBadge})):s.createElement("div",{className:v().intentDetectionCardVoteAndBetaBadge},s.createElement(l.A,{ariaLabel:t,voteYesAriaLabel:"Yes",voteNoAriaLabel:"No",voteYesTooltipMessage:"Yes",voteNoTooltipMessage:"No",onVote:h,voteYesMarginRight:8,irrevocable:!0}),s.createElement(m.v,{browser:A,className:v().intentDetectionCardExpandedInfo})))));h.defaultProps={expanded:!1,accepted:!1,lensIsPriority:!0};const A=({emojiUnicode:e,title:t,expanded:i,accepted:n,onShow:a,onExpand:o,onClick:r,onClose:c,onFeedbackAccurate:d,onFeedbackInaccurate:p,browser:m,lensIsPriority:u})=>s.createElement(h,{emojiUnicode:e,title:t,expanded:i,accepted:n,onShow:a,onExpand:o,onClick:r,onClose:c,onVote:e=>{e===l.x.YES?d():p()},browser:m,lensIsPriority:u});var C,g=i(28043),f=i(77176),b=i(5739),y=i(31881);!function(e){e.IntentDetection=y.UI.Node.make((({view:e,notify:t})=>{const i=e("view");return s.createElement(b.F.div,null,i.pipe(g.x(r.Z.eq.equals),f.U((e=>s.createElement(A,{emojiUnicode:e.emojiUnicode,title:e.title,expanded:"focused"===e.visualState.transition.type,accepted:"success"===e.visualState.transition.type,onShow:t({kind:r.Z.Event.Kind.intentDetectionItemShow,id:e.id,predictionId:e.predictionId,label:e.label}),onExpand:t({kind:r.Z.Event.Kind.intentDetectionItemExpand,id:e.id,predictionId:e.predictionId,label:e.label}),onClick:t({kind:r.Z.Event.Kind.intentDetectionItemClick,id:e.id,predictionId:e.predictionId,label:e.label}),onClose:t({kind:r.Z.Event.Kind.intentDetectionItemClose,id:e.id}),onFeedbackAccurate:t({kind:r.Z.Event.Kind.intentDetectionItemFeedbackAccurate,id:e.id,predictionId:e.predictionId,label:e.label,transitionType:e.visualState.transition.type}),onFeedbackInaccurate:t({kind:r.Z.Event.Kind.intentDetectionItemFeedbackInaccurate,id:e.id,predictionId:e.predictionId,label:e.label}),browser:e.browser,lensIsPriority:e.lensIsPriority})))))}))}(C||(C={}));var k=i(54483),S=i(31820),w=i(35108),T=i(40151),E=i(2834),D=i(55415),U=i(22232),B=i(5114),F=i(32821),x=i(30763),P=i(7046),N=i(21474),R=i(3656),_=i(28706),M=i(26027),O=i(15646),q=i(74754),X=i(66346),V=i(76974),Z=i(16314),H=i(35501),K=i(35630),L=i(32585);const j=F.UI.Node.make((({state:e,notify:t})=>{const i=s.useContext(x.m.Context);return s.createElement(b.F.Fragment,null,e.pipe(f.U((e=>(0,n.pipe)(e.details,B.fold((()=>s.createElement("div",null)),(()=>s.createElement(P.zx.Tertiary,{key:"toggle-more",name:(0,X.hC)(e.visualState,i),title:(0,X.hC)(e.visualState,i),onClick:_.hz(t({type:O.eI.Kind.startTransitionTo,id:e.id,transition:{type:M.X.isCardOpen(e.visualState)?"focused":"expanded",clockwise:!0}}))},M.X.isCardOpen(e.visualState)?s.createElement(N.JO.Arrow,{key:"more",className:L.lessIcon}):s.createElement(N.JO.QuestionMark,{key:"expand"}),(0,X.hC)(e.visualState,i)))))))))})),W=F.UI.Node.make((({notify:e})=>s.createElement(P.zx.Tertiary,{name:"dismiss",title:"Dismiss",onClick:_.hz(e({type:Z.H.Type.ignoreButtonClick}))},s.createElement(N.JO.Ignore,null)))),Y=F.UI.Node.make((({state:e})=>s.createElement(b.F.Fragment,null,e.pipe(f.U((e=>(0,n.pipe)(e.details,B.fold(n.constNull,(t=>s.createElement(X.G3,{key:"card-actions-details",visualState:e.visualState,className:L.more},s.createElement(R.XY,{className:L.minimalDescription,...q.y.renderToHtml(t)}))))))))))),G=F.UI.Knot.make(F.UI.Grid.make((({state:e,slots:t,notify:i})=>s.createElement(b.F.Fragment,null,e.pipe(f.U((e=>s.createElement(b.F.div,{className:K.card},t.header,s.createElement(b.F.div,{className:L.cardBody},t.content,t.details,s.createElement("div",{className:L.actions},s.createElement(P.zx.Primary,{name:"readersAttentionItem-view-more",onClick:_.hz(i({type:Z.H.Type.viewMoreButtonClick,item:e})),className:L.viewMoreButton},"See suggestions"))),s.createElement(b.F.div,{className:L.footer},t.expandButton,t.dismissButton)))))))),{header:(0,H.h)("full"),content:H.r,details:Y,expandButton:j,dismissButton:W}),z=e=>F.Z.composeKnot({root:F.Z.fromSideEffect(n.constVoid,e),header:()=>e,content:()=>e.pipe(f.U((e=>({attentionScore:e.attentionScore,description:e.description})))),details:()=>e,expandButton:()=>e,dismissButton:()=>V.of(null)});var Q=i(65060),J=i(11510);const $=F.UI.Knot.make(F.UI.Grid.make((({slots:e,notify:t})=>s.createElement(b.F.div,{onClick:_.hz(t({type:Z.H.Type.miniCardClick,id:Q.g.id})),...(0,u.Sh)(K.card,J.miniCard)},e.header))),{header:(0,H.h)("mini")}),ee=e=>F.Z.composeKnot({root:F.Z.fromSideEffect(n.constVoid,null),header:()=>e});var te;!function(e){const t=F.UI.Union.make("kind",{mini:$,full:G,hidden:F.UI.Node.empty}),i=e=>({mini:ee(e.pipe(f.U((e=>({title:e.view.title,attentionScore:e.view.attentionScore,density:e.density}))))),full:z(e.pipe(f.U(D.pick("view")))),hidden:()=>T.E}),a=k.G.make(t);function o(e){switch(e){case"added":case"rendered":return"mini";case"focused":case"expanded":return"full";case"hidden":case"removed":return"hidden";case"presuccess":case"success":case"feedback_form":case"muted":throw new Error(`${e} is not supported for ReadersAttentionCard`);default:(0,U.vE)(e)}}e.Card=F.UI.Node.make((({state:e,notify:t})=>F.UI.mount(a,(0,n.pipe)(S.g.flow(e.pipe(f.U(D.pick("view"))),(0,n.pipe)((e=>F.Z.composeUnion(i(e),(()=>e.pipe(f.U((e=>({kind:o(e.view.visualState.transition.type)})))))))(e),F.Z.extendActions(E.b((e=>t(e.action.action)())))),(e=>F.Z.composeUnion(i(e),(()=>e.pipe(f.U((e=>({kind:(0,n.pipe)(e.view.visualState.from,B.fold((()=>"mini"),o))})))))))(e),D.pick("id"),w.CE.toOption(w.a)),S.g.extend((e=>t(e)()))))))}(te||(te={}));var ie=i(48521),ne=i(16892);const ae=e=>t=>({...t,positionState:e}),oe=e=>t=>({...t,visualState:e});var se,re=i(66896),le=i(22373),ce=i(7910),de=i(84246),pe=i(84974),me=i(98752),ue=i(17594),Ie=i(91549),ve=i(20594),he=i(86775),Ae=i(75316),Ce=i(15215),ge=i(70100),fe=i(47306),be=i(35416),ye=i(93494),ke=i(8125),Se=i(83078),we=i(73975),Te=i(45701);!function(e){function t(e,t,i,n,a,o){return be.nL.Items.mapper((e=>e.kind),{[M.X.Kind]:e,[Ie.R.Kind]:t,[ge.X.kind]:i,[fe.J.kind]:n,[r.Z.Kind]:a,[Q.g.kind]:o})}function i(e){return e.kind===M.X.Kind}function s(e){return e.kind===Ie.R.Kind}function l(i,n){return(0,ce.Pv)(e.disposable,((e,a)=>t((t=>({view:t,isLastCard:e,kind:"alertCard",visibleViewportHeight:i(a)})),(t=>({view:t,isLastCard:e,kind:"alertsBundle",visibleViewportHeight:i(a)})),(e=>({view:e,kind:"checklistItemEmpty"})),(t=>({view:t,kind:"checklistItemWithAlerts",isLastCard:e,visibleViewportHeight:i(a)})),(e=>({view:e,kind:"intentDetection"})),(e=>({density:n()===re.R.SpecialId.AllAlerts?"normal":"compact",view:e,kind:"readersAttentionItem"})))))}e.isSelectableWithAlertItem=(0,ke.Kg)(i,s,Ce.d.isChecklistItemWithAlerts),e.getActiveItemWithAlert=be.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=be.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=be.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=s,e.defaultOrd=(0,a.fold)(Te.getMonoid())([(0,o.pipe)(Te.ordBoolean,Te.contramap((0,n.not)(r.Z.isIntentDetectionItem))),(0,o.pipe)(Te.ordBoolean,Te.contramap(Q.m)),Te.fromCompare(((e,t)=>i(e)&&i(t)?M.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,a.fold)(Te.getMonoid())([(0,o.pipe)(Te.ordBoolean,Te.contramap((0,n.not)(r.Z.isIntentDetectionItem))),(0,o.pipe)(Te.ordBoolean,Te.contramap(Q.m)),Te.fromCompare(((e,t)=>s(e)&&s(t)?Ie.R.ord.compare(e,t):0))]),e.item=e=>y.UI.Union.make("kind",{alertCard:le.p.Card(e),alertsBundle:de.Q.Card(e),checklistItemEmpty:pe.z.Card(e),checklistItemWithAlerts:me.fw.Card(e),intentDetection:C.IntentDetection,readersAttentionItem:te.Card}),e.viewState=l,e.createCardListFlow=(e,t)=>(0,ce.sJ)((i=>{switch(i.key){case"intentDetection":(0,o.pipe)(e,Se.tap((e=>{e.intentDetectionActions.next(i.action)})));break;case"readersAttentionItem":(0,o.pipe)(t,Se.tap((e=>e.actions.next(i.action))));break;default:(0,U.L0)(i)}})),e.listItemOrd=e=>Te.contramap((e=>e.cell.item.view))(e).compare;const c={equals:(e,t)=>e.kind===t.kind&&ne.s.eqById.equals(e,t)},d=(e,t,i,n,a,o)=>({equals:(s,l)=>{const d={[M.X.Kind]:e,[Ie.R.Kind]:t,[ge.X.kind]:i,[fe.J.kind]:n,[r.Z.Kind]:a,[Q.g.kind]:o};return c.equals(s,l)&&function(e,t){return(i,n)=>t[e(i)].equals(i,n)}((e=>e.kind),d)(s,l)}}),p=(0,a.fold)(we.getMonoid())([ie.o.eq,ne.s.verticalPositionEq,c]);function m(e,i){const n=M.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(n.changePosition(e),Ie.R.changePosition(e),ge.X.changePositionState(e),i.changePositionState(e),r.Z.Capabilities.changePosition(e),ae(e))}}function u(e,i){const n=M.X.Capabilities.getTransitionTo(e);return{transitionTo:e=>t(n.transitionTo(e),Ie.R.transitionTo(e),ge.X.transitionTo(e),i.transitionTo(e),r.Z.Capabilities.transitionTo(e),(e=>t=>({...t,visualState:ie.o.VisualState.to(t.visualState,e)}))(e))}}function I(e,i){const n=M.X.Capabilities.getCompleteTransition(e);return{completeTransition:e=>{return t(n.completeTransition(e),Ie.R.completeTransition(e),ge.X.completeTransition(e),i.completeTransition(e),r.Z.Capabilities.completeTransition(e),(a=e,e=>({...e,visualState:ie.o.VisualState.complete(e.visualState,a)})));var a}}}function v(e,i,a,s,l){const c=Ie.R.getCardHydrator(l),d=Ie.R.getSelect(a,s,c),p=Ie.R.getSelectByAlert(a,s,c),m=M.X.Capabilities.getSelect(e);return{select:(e,a)=>t(m.select(e,a),d(e,a),ge.X.select(e),i.selectFirstAlert((0,n.unsafeCoerce)(e),a),r.Z.Capabilities.select(e),function(e,t){return i=>{const a=(0,o.pipe)(e,B.map((e=>t.compare(i,e)>0)),B.getOrElse(n.constTrue)),s=(0,o.pipe)(e,B.exists((e=>e.id===i.id))),r=s&&M.X.isCardOpen(i.visualState)?"expanded":"focused",l=(0,o.pipe)(e,B.fold((()=>ie.o.VisualState.initial({type:r,clockwise:a})),(e=>ie.o.VisualState.to(i.visualState,{type:r,clockwise:a}))));return(0,o.pipe)(i,s?n.identity:ae(ne.s.PositionState.invalidateHeight(i.positionState)),oe(l))}}(e,a)),selectByAlert:(e,a,o)=>t(m.selectByAlert(e,a,o),p(a,e,o),ge.X.select(e),i.selectByAlert(a,(0,n.unsafeCoerce)(e),o),n.identity,n.identity),unselect:(e,a)=>t(m.unselect((0,n.unsafeCoerce)(e),a),Ie.R.unselect((0,n.unsafeCoerce)(e),a),ge.X.unselect(e),i.unselect((0,n.unsafeCoerce)(e),a),r.Z.Capabilities.unselect(e),function(e,t){return i=>{const a=(0,o.pipe)(e,B.map((e=>t.compare(i,e)>0)),B.getOrElse(n.constTrue)),s=(0,o.pipe)(e,B.exists((e=>e.id===i.id)));return(0,o.pipe)(i,s?n.identity:ae(ne.s.PositionState.invalidateHeight(i.positionState)),ie.o.isHidden(i)?n.identity:oe(ie.o.VisualState.to(i.visualState,{type:"rendered",clockwise:a})))}}(e,a))}}function h(e,a,o,r,l,c){return{removeAlertFromItem:(d,p)=>t((t=>M.X.Capabilities.getRemoveAlerts(e,p.itemsOrd)(d,be.In.getActiveItemOfType(i)(p))(t)),(e=>Ie.R.getRemoveAlertsCapability(r,l,c,p.itemsOrd)(d,be.In.getActiveItemOfType(s)(p))(e)),n.identity,(e=>he.G.getRemoveAlert(a,o,r).removeAlertFromItem(d,p)(e)),n.identity,n.identity)}}function A(e,i,a){const o=M.X.Capabilities.getRemove(e);return{remove:(e,s)=>t(o.remove(e,s),(t=>e(t)?Ie.R.getRemove(a)([t.activeAlert],s(t))(t):t),n.identity,(t=>e(t)?i.removeAlerts(t.alerts,s(t))(t):t),n.identity,n.identity)}}function g(e,i,a){const o=M.X.Capabilities.getUpdateWithAlert(e),s=Ie.R.getUpdatableWithAlertsCapability(i);return{updateWithAlerts:e=>t(o.updateWithAlerts(e),s(e),n.identity,a.updateWith(e),n.identity,n.identity)}}e.equatable={structEq:d(M.X.eq,Ie.R.eq,ge.X.eq,fe.J.eq,r.Z.eq,Q.g.eq),idEq:d(c,c,c,c,c,c),visualStateEq:d(p,p,p,p,p,p)},e.changePosition=m,e.disposable={isScheduledToDispose:t((e=>Ae.C.willBeDisposed(e,e.removedAlertsIds)),(e=>Ae.C.willBeDisposed(e,e.removedAlertsIds)),n.constFalse,(e=>Ae.C.willBeDisposed(e,e.removedAlertsIds)),n.constFalse,n.constFalse)},e.hidable={isHidden:t(ie.o.isHidden,ie.o.isHidden,ie.o.isHidden,ie.o.isHidden,ie.o.isHidden,ie.o.isHidden)},e.transitionTo=u,e.completeTransition=I,e.hasAlertsQueries={isSelectableByAlert:e=>t(Ae.C.hasAlert(e.alert.id),Ae.C.hasAlert(e.alert.id),n.constFalse,Ae.C.hasAlert(e.alert.id),n.constFalse,n.constFalse),hasAlert:e=>t(Ae.C.hasAlert(e),Ae.C.hasAlert(e),n.constFalse,Ae.C.hasAlert(e),n.constFalse,n.constFalse),hasActiveAlert:t((e=>B.some(e.activeAlert)),(e=>B.some(e.activeAlert)),(()=>B.none),(e=>B.some(e.activeAlert)),(()=>B.none),(()=>B.none))},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(n.constFalse,n.constFalse,n.constFalse,n.constTrue,n.constFalse,n.constFalse)},e.select=v,e.removeAlert=h,e.remove=A,e.updateWithAlert=g,e.releaseAlert=(t,i,n,a,o,s)=>ye.v.Capabilities.getAlertReleaser({...h(t,i,n,a,o,s),...e.disposable}),e.unselectable=(e,t,i,n,a)=>ye.v.Capabilities.getUnselectable(be.In.getActiveItem,v(e,t,i,n,a)),e.selectableByAlert=(t,i,n,a,o)=>ye.v.Capabilities.getSelectableByAlert(be.In.getActiveItem,{...e.hasAlertsQueries,...v(t,i,n,a,o)}),e.selectableById=(e,t,i,n,a)=>ye.v.Capabilities.getSelectableById(be.In.getActiveItem,v(e,t,i,n,a)),e.updateMeta=()=>({updateMeta:ye.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatable=(t,i,n,a,o,s)=>ye.v.Capabilities.getAnimatable(t,{...h(t,i,n,a,o,s),...e.hasAlertsQueries}),e.hasPriorityToggle=(t,i)=>ye.v.WithPriority.getHasPriorityToggle({...u(t,i),...e.hasAlertsQueries,...e.disposable});const f=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function b(e,i){const n=ve.Mq.getCardSelections(i);return{nextAlert:t(n.nextAlert,n.nextAlert,(()=>B.none),e.nextAlert,(()=>B.none),(()=>B.none)),prevAlert:t(n.prevAlert,n.prevAlert,(()=>B.none),e.prevAlert,(()=>B.none),(()=>B.none))}}function k(){return{updateUserInput:e=>t(M.X.updateUserInput(e),Ie.R.changeUserInput(e),n.identity,n.identity,n.identity,n.identity)}}e.alignable={isValidToAlign:t(f,f,n.constFalse,f,n.constFalse,n.constFalse)},e.alertIterator=b,e.itemReleaser=(e,t,i)=>he.G.getItemReleaser(e,t,i,ye.v.Capabilities.getItemReleaser()),e.hasAlerts=ye.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,ke.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,o.pipe)(i,e.hasAlertsQueries.hasActiveAlert,B.map((e=>t.isRegistered(e.id))),B.getOrElse(n.constFalse)))),e.hasUserInput=k,e.priorityTest=(0,ke.W9)(i,(e=>ue.$.isPriority(e.activeAlert))),e.verifiable=()=>ye.v.Capabilities.getVerifiable(e.disposable),e.getCapabilities=function(t,i,a,o,s,r,c,d=(0,n.constant)(B.none),p=ve.IG.Default){return{...l(d,c),...e.disposable,...e.hidable,...e.equatable,...k(),...m(t,a),...u(t,a),...I(t,a),...v(t,a,o,p,s),...A(t,a,p),...h(t,a,r,o,p,s),...g(t,i,a),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,a,r,o,p,s),...e.unselectable(t,a,o,p,s),...e.selectableByAlert(t,a,o,p,s),...e.selectableById(t,a,o,p,s),...e.updateMeta(t),...e.animatable(t,a,r,o,p,s),...e.hasPriorityToggle(t,a),...e.itemReleaser(a,r,o),...e.verifiable(),...e.hasAlerts(b(a,o),e.hasAlertsQueries,(()=>e.getDefaultNextAlertItemFilter(o)))}}}(se||(se={}))},63047:(e,t,i)=>{i.d(t,{Z:()=>n});var n,a=i(40327),o=i(66896),s=i(36156),r=i(5920),l=i(48521),c=i(16892),d=i(4890),p=i(35416),m=i(93494),u=i(73975),I=i(5114),v=i(83078),h=i(95195),A=i(55415);!function(e){let t,i;e.id="IntentDetectionItemId",e.Kind="IntentDetectionItem",e.isIntentDetectionItem=function(t){return t.id===e.id},e.eq=u.fromEquals(((e,t)=>e.hashCode()===t.hashCode())),function(e){let t;!function(e){e.intentDetectionItemShow="intentDetectionItemShow",e.intentDetectionItemExpand="intentDetectionItemExpand",e.intentDetectionItemClick="intentDetectionItemClick",e.intentDetectionItemFeedbackAccurate="intentDetectionItemFeedbackAccurate",e.intentDetectionItemFeedbackInaccurate="intentDetectionItemFeedbackInaccurate",e.intentDetectionItemClose="intentDetectionItemClose",e.intentDetectionItemAccept="intentDetectionItemAccept"}(t=e.Kind||(e.Kind={})),e.isIntentDetectionItemShowAction=function(e){return e.kind===t.intentDetectionItemShow},e.isIntentDetectionItemExpandAction=function(e){return e.kind===t.intentDetectionItemExpand},e.isIntentDetectionItemClickAction=function(e){return e.kind===t.intentDetectionItemClick},e.isIntentDetectionItemFeedbackInaccurateAction=function(e){return e.kind===t.intentDetectionItemFeedbackInaccurate},e.isIntentDetectionItemFeedbackAccurateAction=function(e){return e.kind===t.intentDetectionItemFeedbackAccurate},e.isIntentDetectionItemCloseAction=function(e){return e.kind===t.intentDetectionItemClose},e.isIntentDetectionItemAcceptAction=function(e){return e.kind===t.intentDetectionItemAccept}}(t=e.Event||(e.Event={})),function(e){e.changePosition=e=>t=>new C(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,e,t.visualState),e.transitionTo=e=>t=>new C(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,t.positionState,l.o.VisualState.to(t.visualState,e)),e.completeTransition=e=>t=>new C(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,t.positionState,l.o.VisualState.complete(t.visualState,e)),e.select=e=>t=>(0,a.pipe)(e,I.filter((e=>e.id===t.id)),v.orElse((0,a.pipe)(t,I.fromPredicate((e=>"focused"===e.visualState.transition.type)))),I.fold((()=>{const i=c.s.PositionState.invalidateHeight(t.positionState),n={type:"focused",clockwise:!0},o=(0,a.pipe)(e,I.fold((()=>l.o.VisualState.initial(n)),(()=>l.o.VisualState.to(t.visualState,n))));return new C(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,i,o)}),(()=>t))),e.unselect=e=>t=>(0,a.pipe)(e,I.filter((e=>e.id===t.id)),v.orElse((0,a.pipe)(t,I.fromPredicate((e=>"rendered"===e.visualState.transition.type)))),I.fold((()=>{const e=c.s.PositionState.invalidateHeight(t.positionState),i="hidden"===t.visualState.transition.type?t.visualState:l.o.VisualState.to(t.visualState,{type:"rendered",clockwise:!0});return new C(t.predictionId,t.label,t.emojiUnicode,t.title,t.browser,t.lensIsPriority,e,i)}),(()=>t)))}(i=e.Capabilities||(e.Capabilities={}));e.getStateTransformer=t=>({state:i,metadata:n})=>{if(!p.nL.hasItems(i)||!o.R.isMainLens(i.currentLens.id)||!p.nL.isLensview(i))return h.left({state:i,metadata:n});const s=(0,a.pipe)(r.l.find(i.currentLens.items,e.isIntentDetectionItem),I.map(A.pick("value")));return(0,a.pipe)(i,p.nL.getLens,I.chain(((e,t)=>i=>{const n=t.getValue(),s=n?new C(n.predictionId,n.label,n.emojiUnicode,n.title,n.browser,o.R.isPriority(i.id),c.s.PositionState.changeWatched(c.s.PositionState.empty,!0),l.o.VisualState.initial({type:"rendered",clockwise:!0},!1)):null;return(0,a.pipe)(e,I.fold((()=>I.some({lens:i,newIntentDetectionItem:s})),(e=>(null==s?void 0:s.label)===e.label?I.none:I.some({lens:i,newIntentDetectionItem:s}))))})(s,t)),I.map((({lens:e,newIntentDetectionItem:t})=>{let n=(0,a.pipe)(s,I.fold((()=>e.items),(t=>e.items.remove(t.id))));return t&&(n=n.add(t)),p.nL.Prism.getLens().compose(m.v.Prism.items).set(n,i)})),I.getOrElse((()=>i)),(e=>h.left({state:e,metadata:n})))}}(n||(n={}));class C{constructor(e,t,i,a,o,s,r,l){this.predictionId=e,this.label=t,this.emojiUnicode=i,this.title=a,this.browser=o,this.lensIsPriority=s,this.positionState=r,this.visualState=l,this.kind=n.Kind,this.id=n.id,this.renderOptions=d.j.defaultOptions}equals(e){return n.eq.equals(this,e)}hashCode(){return(0,s.NO)({predictionId:this.predictionId,label:this.label,emojiUnicode:this.emojiUnicode,title:this.title,browser:this.browser,lensIsPriority:this.lensIsPriority,positionState:JSON.stringify(this.positionState),visualState:JSON.stringify(this.visualState)})}}},65060:(e,t,i)=>{i.d(t,{g:()=>n,m:()=>m});var n,a=i(57050),o=i(2291),s=i(36156),r=i(16892),l=i(48521),c=i(4890),d=i(73975),p=i(5114);function m(e){return e.id===n.id}!function(e){e.id="ReadersAttentionItemId",e.kind="ReadersAttentionItem",e.eq=d.fromEquals(((e,t)=>e.hashCode()===t.hashCode()&&r.s.PositionState.eq.equals(e.positionState,t.positionState)&&l.o.VisualState.eq.equals(e.visualState,t.visualState))),e.hashCodeOwnFields=e=>(0,s.NO)({title:e.title,description:e.description,details:(0,a.pipe)(e.details,p.fold((()=>"none"),(e=>`some(${e})`))),attentionScore:o.T.prism.reverseGet(e.attentionScore)}),e.hashCode=e.hashCodeOwnFields,e.create=function(t,i,n){return{id:e.id,kind:e.kind,renderOptions:{...c.j.defaultOptions,layoutDensity:c.j.Density.minimal},positionState:i,visualState:n,title:t.title,description:t.description,details:t.details,attentionScore:t.attentionScore,equals(t){return e.eq.equals(this,t)},hashCode(){return e.hashCode(this)}}}}(n||(n={}))},16314:(e,t,i)=>{var n;i.d(t,{H:()=>n}),function(e){let t;!function(e){e.miniCardClick="readersAttentionItemMiniCardClick",e.ignoreButtonClick="readersAttentionItemIgnoreButtonClick",e.viewMoreButtonClick="readersAttentionItemViewMoreButtonClick"}(t=e.Type||(e.Type={})),e.isMiniCardClick=function(e){return e.type===t.miniCardClick},e.isIgnoreButtonClick=function(e){return e.type===t.ignoreButtonClick},e.isViewMoreButtonClick=function(e){return e.type===t.viewMoreButtonClick}}(n||(n={}))},35501:(e,t,i)=>{i.d(t,{h:()=>I,r:()=>v});var n=i(27378),a=i(63847),o=i(3656),s=i(77176),r=i(2291),l=i(8125),c=i(5739),d=i(12187),p=i(32821),m=i(35630);const u=({progress:e})=>n.createElement(c.F.Fragment,null,e.pipe(s.U((e=>n.createElement(a.P,{percentage:r.g.prism.reverseGet(e),colorType:a.P.ColorType.neoBlue,iconSize:a.P.IconSize.extraSmall,theme:{radialProgressBar:m.circleProgress,radialProgressText:m.circleText}}))))),I=e=>p.UI.Node.make((({view:t})=>n.createElement(c.F.div,{...(0,d.Sh)(m.header,t("density").pipe(s.U((e=>"normal"===e)),s.U((0,l.RN)(m.normal,m.compact))))},n.createElement("div",{className:m.progressIcon},n.createElement(u,{progress:t("attentionScore").pipe(s.U(r.g.fromRatio))})),n.createElement(o.XY,{...(0,d.Sh)(m.title,"full"===e?m.full:void 0)},t("title"))))),v=p.UI.Node.make((({view:e})=>n.createElement(n.Fragment,null,n.createElement("div",{className:m.progressContainer},n.createElement(c.F.div,{className:m.progressBar,style:{width:e("attentionScore").pipe(s.U(r.g.fromRatio),s.U(r.g.prism.reverseGet),s.U((e=>`${e}%`)))}},n.createElement(o.XY,{className:m.progressValue},e("attentionScore").pipe(s.U(r.g.fromRatio),s.U(r.g.prism.reverseGet),s.U((e=>`${e}%`)))))),n.createElement(o.XY,{className:m.description},e("description")))))},72311:(e,t,i)=>{i.r(t),i.d(t,{ToneAIFeature:()=>y});var n=i(57050),a=i(40327),o=i(17404),s=i(55281),r=i(90361),l=i(88097),c=i(14601),d=i(16118),p=i(77176),m=i(85985),u=i(93508),I=i(41398),v=i(17594),h=i(15646),A=i(75316),C=i(35416),g=i(5114),f=i(8125),b=i(83078);class y{constructor(e,t,i){this._highlights=e,this._alertProcessor=t,this._gnar=i}initCardActionsProcessing(e,t,i,k,S){const w=new c.w;return w.add(this._highlights.geometry.pipe(d.G(),p.U((([e,t])=>{const i=new Set(Array.from(e.values()).map((e=>e.meta.alertId)));return Array.from(t.values()).filter((e=>!i.has(e.meta.alertId))).map((e=>this._alertProcessor.alerts.getAlertById(e.meta.alertId))).find((e=>e&&o.S.isToneAIAlert(e)))})),m.h(r.fQ),m.h(o.S.isToneAIAlert)).subscribe((e=>this._gnar.toneAIAlertUnderlineShow(y._getToneRewriteType(e.patternName))))),w.add(i.view((e=>(0,a.pipe)(g.fromPredicate(C.nL.hasItems)(e),g.map((e=>e.currentLens.items)),g.map((e=>e.filter((0,f.Kg)(s.O.isAlertCard,s.O.isAlertsBundle)))),g.map((e=>e.filter(A.C.isToneAIItem))),g.map((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),g.fold((()=>null),(e=>e.values()))))).pipe(u.O([]),m.h(r.Nf),d.G(),p.U((([e,t])=>t.filter((t=>!e.find((e=>e.id===t.id))))))).subscribe((e=>e.forEach((e=>this._gnar.toneAIAssistantMiniCardShow(y._getToneRewriteType(e.activeAlert.patternName))))))),w.add(e.pipe(m.h(h.lY.isAlertCardShow)).subscribe((e=>(0,a.pipe)(t.getById(e.alertId),g.filter(l.bZ.isToneAI),b.tap((e=>this._gnar.toneAIAssistantFullCardShow(y._getToneRewriteType(e.patternName)))))))),w.add(e.pipe(m.h(h.lY.isAlertApplyAction)).subscribe((e=>(0,a.pipe)(t.getById(e.alertId),g.filter(l.bZ.isToneAI),b.tap((e=>{this._gnar.toneAIAssistantFullCardReplacementApply(y._getToneRewriteType(e.patternName))})))))),y._subscribeToMuteOrUndoMuteButtonClick(w,e,i,h.lY.isMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardMuteButtonClick(y._getToneRewriteType(e.patternName)))),y._subscribeToMuteOrUndoMuteButtonClick(w,e,i,h.lY.isUndoMuteCategoryAction,(e=>this._gnar.toneAIAssistantFullCardUndoMuteButtonClick(y._getToneRewriteType(e.patternName)))),w.add(k.alertClicked.pipe(p.U((e=>(0,a.pipe)(e,g.fold((()=>null),n.identity)))),m.h(r.fQ),p.U((e=>e.alert)),m.h(v.$.isToneAI),I.M(S.activeAlert),m.h((([e,t])=>e.id!==(null==t?void 0:t.id))),p.U((([e,t])=>e))).subscribe((e=>this._gnar.toneAIAlertUnderlineClick(y._getToneRewriteType(e.patternName))))),w.add(e.pipe(m.h(h.lY.isToneAIChangeToneAlternativeAction),d.G(),m.h((([e,t])=>e.selectedToneAlternativeIdx!==t.selectedToneAlternativeIdx)),p.U((([e,t])=>({alertId:t.alertId,oldToneAlternativeIdx:e.selectedToneAlternativeIdx,newToneAlternativeIdx:t.selectedToneAlternativeIdx})))).subscribe((({alertId:e,oldToneAlternativeIdx:i,newToneAlternativeIdx:n})=>(0,a.pipe)(t.getById(e),b.tap((e=>(0,a.pipe)(e.extraProperties.toneAI,b.tap((t=>{this._gnar.toneAIAssistantFullCardSliderMove(y._getToneRewriteType(e.patternName),t.toneAlternatives[i].name,t.toneAlternatives[n].name)}))))))))),w}static _getToneRewriteType(e){return e.split("/").slice(2).join("/")}static _subscribeToMuteOrUndoMuteButtonClick(e,t,i,n,o){e.add(t.pipe(m.h(n),I.M(i),p.U((([e,t])=>C.nL.hasItems(t)?(0,a.pipe)(t.currentLens.items.get(e.id),g.fold((()=>null),(e=>e.value))):null)),m.h(r.fQ),m.h(A.C.isToneAIItem),p.U((e=>e.activeAlert))).subscribe(o))}}},86705:(e,t,i)=>{i.d(t,{v:()=>o});var n=i(27378),a=i(80895);const o=({browser:e,className:t})=>"safari"!==e?n.createElement(a.C,{title:"BETA",kind:"success",className:t}):null},35630:e=>{e.exports={circleProgress:"_1npo5",circleText:"_3muDd",card:"AAT_T",header:"_3k6P5",compact:"_1Efs0",normal:"_2_T8O",progressIcon:"_3lupT",title:"_1U6tn",full:"_24i7N",progressContainer:"TH-Um",progressBar:"_1Tzvc",progressValue:"_1Ck8G",description:"_4m_YN"}},32585:e=>{e.exports={cardBody:"_1qMrW",description:"_3g_X-",actions:"G0xen",lessIcon:"_3HhMd",minimalDescription:"srN6O",footer:"_29CM1",viewMoreButton:"_1CGEL"}},11510:e=>{e.exports={miniCard:"_2FMyP"}},67489:e=>{e.exports={intentDetectionCardContent:"n8ZBv",intentDetectionCardContentExpanded:"_1zJsg",intentDetectionCardContentAccepted:"_2Nm5X",intentDetectionCardEmojiAndTitle:"W04V0",intentDetectionCardEmoji:"_2E35l",intentDetectionCardBetaBadgeAndCloseButton:"bRRgr",intentDetectionCardBetaBadge:"u4Umu",intentDetectionCardCloseButton:"_1kFTv",intentDetectionCardVoteAndBetaBadge:"Szcks",intentDetectionCardExpandedInfo:"_1iUYT"}}}]);